<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>WASM</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
    <h1>WASM</h1>

    <script>
function loadWat(fileName) {
  return fetch(fileName)
    .then(response => { console.log(response); return response.text() })
    .then(t => { console.log(t); return wasmTextToBinary(t)})
    .then(b => WebAssembly.Module(b))
    .then(module => new WebAssembly.Instance(module));
};

loadWat('http://127.0.0.1:8000/m1.wat')
  .then(instance => {
    console.log(instance.exports.helloWorld());
  });
    </script>
</body>
</html>
